<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/rate_my_course/styles/main.css">
    <script defer src="/rate_my_course/scripts/app.js"></script>
    <script src="/rate_my_course/scripts/managedata.js"></script>
    
    <title>Rate My Course</title>
</head>

<body>
    <header>
        <div class="header">
            <a href="index.html"><div id="logo">
                <img src="/rate_my_course/images/mortarboard.svg" alt="RateMy Logo">
                <h1>Rate My Course</h1>
            </div></a>
            <div id="register-login">
                <button id="login">Login</button>
                <button id="register">Sign Up</button>
            </div>
        </div>
    </header>

    <main>
        <div class="form">
            <h1>Add Course</h1>
            <form method="proccessForm" autocomplete="on">
                <label for="universityName">
                    College/University
                    <input type="text" id="universityName" name="universityName" placeholder="Brigham Young University of Idaho" required>
                </label>

                <label for="courseName">
                    Course Name
                    <input type="text" id="courseName" name="courseName" placeholder="Applied Programming" required>
                </label>

                <label for="courseCode">
                    Course Code
                    <input type="text" id="courseCode" name="courseCode" placeholder="CSE310" required>
                </label>

                
                <input type="submit" id="submit" value="Submit">

            </form>
        </div>
        <script>
        // take school from local storage and put it in the form
        document.getElementById("universityName").value = localStorage.getItem("universityName");
        document.getElementById("courseName").value = localStorage.getItem("courseName");
        document.getElementById("courseCode").value = localStorage.getItem("courseCode");
        // create function that is triggered when submit button is clicked
        document.getElementById("submit").addEventListener("click", proccessForm);
        function proccessForm(event) {
            event.preventDefault();
            // get values from form
            var universityName = document.getElementById("universityName").value;
            var courseName = document.getElementById("courseName").value;
            var courseCode = document.getElementById("courseCode").value;
            // store values in local storage
            localStorage.setItem("universityName", universityName);
            localStorage.setItem("courseName", courseName);
            localStorage.setItem("courseCode", courseCode);
            window.location.href = "rate_course.html";
            // obj.university.push({
            //             "university": [
            //                 {
            //                     "name": universityName,
            //                     "class": [
            //                         {
            //                             "name": courseName,
            //                             "courseCode": courseCode,
            //                             "rating": [
            //                                 {
            //                                     "overall": overall,
            //                                     "workload": workload,
            //                                     "tudorAvailability": tudoravailability,
            //                                     "interesting": interesting,
            //                                     "comment": comment
            //                                 }
            //                             ]
            //                         }
            //                     ]
            //                 }
            //             ]
            //         });
            // search for courseCode or CourseName in node js server http://localhost:3000/rate_my_course/api/v1/courses
            // if course exists redirect to secondpage.html
            // if course does not exist, redirect to rate_course.html
            var xhr = new XMLHttpRequest();
            // xhr.open("GET", "http://localhost:3000/rate_my_course/api/v1/courses");
            // xhr.onload = function() {
            //     if (xhr.status == 200) {
            //         var courses = JSON.parse(xhr.responseText);
            //         for (var i = 0; i < courses.length; i++) {
            //             if (courses[i].courseCode == courseCode || courses[i].courseName == courseName) {
            //                 window.location.href = "secondpage.html";
            //             }
            //         }
            //         window.location.href = "rate_course.html";
            //     }
            // }
            
        }
       
        </script>
    </main>

    <footer>
        <div id="logo">
            <img src="/rate_my_course/images/mortarboard.svg" alt="RateMy Logo">
            <h1>Rate My Course</h1>
        </div>
        <div id="socials">
            <a href="#"><img src="/rate_my_course/images/facebook.png" alt="facebook"></a>
            <a href="#"><img src="/rate_my_course/images/instagram.png" alt="Instagram"></a>
            <a href="#"><img src="/rate_my_course/images/linkedin.png" alt="Linkedin"></a>
            <a href="#"><img src="/rate_my_course/images/youtube.png" alt="Youtube"></a>
        </div>
    </footer>
</body>

</html>